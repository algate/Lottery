(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-personal-center-user-weather"],{"00c6":function(t,a,e){"use strict";e.r(a);var i=e("9f50"),n=e("4a8e");for(var s in n)"default"!==s&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("8191");var o,r=e("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"bb01aa04",null,!1,i["a"],o);a["default"]=c.exports},"35d3":function(t,a,e){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}e("4de4"),e("ac1f"),e("1276");var n=function(){function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,e,i){return e&&t(a.prototype,e),i&&t(a,i),a}}(),s=function(){function t(a){i(this,t),this.ak=a.ak}return n(t,[{key:"getWXLocation",value:function(t,a,e,i){t=t||"gcj02",a=a||function(){},e=e||function(){},i=i||function(){},wx.getLocation({type:t,success:a,fail:e,complete:i})}},{key:"search",value:function(t){var a=this;t=t||{};var e={query:t.query||"生活服务$美食&酒店",scope:t.scope||1,filter:t.filter||"",coord_type:t.coord_type||2,page_size:t.page_size||10,page_num:t.page_num||0,output:t.output||"json",ak:a.ak,sn:t.sn||"",timestamp:t.timestamp||"",radius:t.radius||2e3,ret_coordtype:"gcj02ll"},i={iconPath:t.iconPath,iconTapPath:t.iconTapPath,width:t.width,height:t.height,alpha:t.alpha||1,success:t.success||function(){},fail:t.fail||function(){}},n=function(t){e.location=t.latitude+","+t.longitude,wx.request({url:"https://api.map.baidu.com/place/v2/search",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var a=t.data;if(0===a.status){var e=a.results,n={};n.originalData=a,n.wxMarkerData=[];for(var s=0;s<e.length;s++)n.wxMarkerData[s]={id:s,latitude:e[s].location.lat,longitude:e[s].location.lng,title:e[s].name,iconPath:i.iconPath,iconTapPath:i.iconTapPath,address:e[s].address,telephone:e[s].telephone,alpha:i.alpha,width:i.width,height:i.height};i.success(n)}else i.fail({errMsg:a.message,statusCode:a.status})},fail:function(t){i.fail(t)}})},s=function(t){i.fail(t)},o=function(t){};if(t.location){var r=t.location.split(",")[1];n({errMsg:"input location",latitude:t.location.split(",")[0],longitude:r})}else a.getWXLocation("gcj02",n,s,o)}},{key:"suggestion",value:function(t){var a=this;t=t||{};var e={query:t.query||"",region:t.region||"全国",city_limit:t.city_limit||!1,output:t.output||"json",ak:a.ak,sn:t.sn||"",timestamp:t.timestamp||"",ret_coordtype:"gcj02ll"},i={success:t.success||function(){},fail:t.fail||function(){}};wx.request({url:"https://api.map.baidu.com/place/v2/suggestion",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var a=t.data;0===a.status?i.success(a):i.fail({errMsg:a.message,statusCode:a.status})},fail:function(t){i.fail(t)}})}},{key:"regeocoding",value:function(t){var a=this;t=t||{};var e={coordtype:t.coordtype||"gcj02ll",ret_coordtype:"gcj02ll",radius:t.radius||1e3,ak:a.ak,sn:t.sn||"",output:t.output||"json",callback:t.callback||function(){},extensions_poi:t.extensions_poi||1,extensions_road:t.extensions_road||!1,extensions_town:t.extensions_town||!1,language:t.language||"zh-CN",language_auto:t.language_auto||0},i={iconPath:t.iconPath,iconTapPath:t.iconTapPath,width:t.width,height:t.height,alpha:t.alpha||1,success:t.success||function(){},fail:t.fail||function(){}},n=function(t){e.location=t.latitude+","+t.longitude,wx.request({url:"https://api.map.baidu.com/reverse_geocoding/v3",data:e,header:{"content-type":"application/json"},method:"GET",success:function(a){var e=a.data;if(0===e.status){var n=e.result,s={};s.originalData=e,s.wxMarkerData=[],s.wxMarkerData[0]={id:0,latitude:t.latitude,longitude:t.longitude,address:n.formatted_address,iconPath:i.iconPath,iconTapPath:i.iconTapPath,desc:n.sematic_description,business:n.business,alpha:i.alpha,width:i.width,height:i.height},i.success(s)}else i.fail({errMsg:e.message,statusCode:e.status})},fail:function(t){i.fail(t)}})},s=function(t){i.fail(t)},o=function(t){};if(t.location){var r=t.location.split(",")[1];n({errMsg:"input location",latitude:t.location.split(",")[0],longitude:r})}else a.getWXLocation("gcj02",n,s,o)}},{key:"geocoding",value:function(t){var a=this;t=t||{};var e={address:t.address||"",city:t.city||"",ret_coordtype:t.coordtype||"gcj02ll",ak:a.ak,sn:t.sn||"",output:t.output||"json",callback:t.callback||function(){}},i={iconPath:t.iconPath,iconTapPath:t.iconTapPath,width:t.width,height:t.height,alpha:t.alpha||1,success:t.success||function(){},fail:t.fail||function(){}};if(t.address)wx.request({url:"https://api.map.baidu.com/geocoding/v3",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var a=t.data;if(0===a.status){var e=a.result,n=a;n.originalData=a,n.wxMarkerData=[],n.wxMarkerData[0]={id:0,latitude:e.location.lat,longitude:e.location.lng,iconPath:i.iconPath,iconTapPath:i.iconTapPath,alpha:i.alpha,width:i.width,height:i.height},i.success(n)}else i.fail({errMsg:a.message,statusCode:a.status})},fail:function(t){i.fail(t)}});else{var n={errMsg:"input address!"};i.fail(n)}}},{key:"weather",value:function(t){var a=this;t=t||{};var e={coord_type:t.coord_type||"gcj02",output:t.output||"json",ak:a.ak,sn:t.sn||"",timestamp:t.timestamp||""},i={success:t.success||function(){},fail:t.fail||function(){}},n=function(t){e.location=t.longitude+","+t.latitude,wx.request({url:"https://api.map.baidu.com/telematics/v3/weather",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var a=t.data;if(0===a.error&&"success"===a.status){var e=a.results,n={};n.originalData=a,n.currentWeather=[],n.currentWeather[0]={currentCity:e[0].currentCity,pm25:e[0].pm25,date:e[0].weather_data[0].date,temperature:e[0].weather_data[0].temperature,weatherDesc:e[0].weather_data[0].weather,wind:e[0].weather_data[0].wind},i.success(n)}else i.fail({errMsg:a.message,statusCode:a.status})},fail:function(t){i.fail(t)}})},s=function(t){i.fail(t)},o=function(t){};if(t.location){var r=t.location.split(",")[0];n({errMsg:"input location",latitude:t.location.split(",")[1],longitude:r})}else a.getWXLocation("gcj02",n,s,o)}}]),t}();t.exports.BMapWX=s},"4a8e":function(t,a,e){"use strict";e.r(a);var i=e("c197"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},"5e61":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.l-color-white[data-v-bb01aa04]{color:#fff}uni-page-body[data-v-bb01aa04]{height:100%;background-image:-webkit-linear-gradient(#3f7cd3,#91a6d1,#cebdb4,#efa75c);background-image:linear-gradient(#3f7cd3,#91a6d1,#cebdb4,#efa75c)}uni-map[data-v-bb01aa04]{width:100%;height:%?600?%}.box.weather[data-v-bb01aa04]{height:calc(100vh - %?600?% - 46px);background:#00ab98;color:#fff;padding-top:%?80?%;padding-left:%?100?%;line-height:%?60?%}.box.weather uni-text[data-v-bb01aa04]{display:block}\r\n/* .scrollView {\r\n\twidth: 100%;\r\n\tbackground: #fff;\r\n\theight: calc(100vh - 46px - 600rpx);\r\n} */body.?%PAGE?%[data-v-bb01aa04]{background-image:-webkit-linear-gradient(#3f7cd3,#91a6d1,#cebdb4,#efa75c);background-image:linear-gradient(#3f7cd3,#91a6d1,#cebdb4,#efa75c)}',""]),t.exports=a},8191:function(t,a,e){"use strict";var i=e("a9cd"),n=e.n(i);n.a},"9f50":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var i={uNavbar:e("d98b").default,uSearch:e("53ff").default,uIcon:e("b2af").default,uBadge:e("80fe").default,uToast:e("a239").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[e("u-navbar",{attrs:{"title-color":"#fff","back-icon-color":"#ffffff","border-bottom":t.borderBottom,"is-fixed":t.isFixed,"is-back":t.isBack,background:t.background,"back-text-style":{color:"#fff"},title:t.title,"back-icon-name":t.backIconName,"back-text":t.backText}},[t.useSlot?e("v-uni-view",{staticClass:"slot-wrap"},[t.search?e("v-uni-view",{staticClass:"search-wrap"},[e("u-search",{attrs:{placeholder:"日照香炉生紫烟",shape:"square","show-action":!0,"action-text":"搜索",animation:!0,"input-align":"center",height:"54","action-style":{color:"#fff"}},on:{search:function(a){arguments[0]=a=t.$handleEvent(a),t.enterInput.apply(void 0,arguments)},custom:function(a){arguments[0]=a=t.$handleEvent(a),t.customInput.apply(void 0,arguments)}},model:{value:t.inputVal,callback:function(a){t.inputVal=a},expression:"inputVal"}})],1):t._e(),t.rightSlot?e("v-uni-view",{staticClass:"navbar-right"},[e("v-uni-view",{staticClass:"message-box right-item"},[e("u-icon",{attrs:{name:"chat",size:"38"}}),e("u-badge",{attrs:{count:"18",size:"mini",offset:[-15,-15]}})],1),e("v-uni-view",{staticClass:"dot-box right-item"},[e("u-icon",{attrs:{name:"calendar-fill",size:"38"}}),e("u-badge",{attrs:{size:"mini","is-dot":!0,offset:[-6,-6]}})],1)],1):t._e(),t.custom?e("v-uni-view",[e("v-uni-text",{staticClass:"l-color-white u-padding-left-35"},[t._v(t._s(t.title))])],1):t._e()],1):t._e(),t.slotRight?e("v-uni-view",{staticClass:"navbar-right u-margin-right-20",attrs:{slot:"right"},slot:"right"},[e("u-icon",{attrs:{name:"share",size:"38",color:"#fff"}})],1):t._e()],1),e("v-uni-view",{staticClass:"u-text-center l-color-white"},[e("v-uni-view",{staticClass:"u-m-t-30"},[e("u-icon",{attrs:{name:"map-fill",size:"24"}}),t._v(t._s(t.amapWeather.city?t.amapWeather.city.data:""))],1),e("v-uni-view",{staticClass:"u-m-t-80"},[e("v-uni-text",{staticStyle:{"font-size":"150rpx"}},[t._v(t._s(t.amapWeather.temperature?t.amapWeather.temperature.data:""))]),t._v("℃")],1),e("v-uni-view",[t._v(t._s(t.amapWeather.weather?t.amapWeather.weather.data:"")),e("v-uni-image",{staticClass:"u-m-l-20 u-m-r-20",staticStyle:{heigh:"30rpx",width:"44rpx"},attrs:{src:t.futureWeather.length?t.futureWeather[0].dayPictureUrl:"",mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"u-padding-20 u-flex u-row-between"},[e("v-uni-view",{staticClass:"u-padding-10"},[t._v("PM2.5："+t._s(t.bmapWeather.pm25))]),e("v-uni-view",{staticClass:"u-padding-10"},[t._v("湿度："+t._s(t.amapWeather.humidity?t.amapWeather.humidity.data:""))])],1),e("v-uni-view",{staticClass:"u-padding-20 u-flex u-row-between"},[e("v-uni-view",{staticClass:"u-padding-10"},[t._v("风速："+t._s(t.bmapWeather.wind))]),e("v-uni-view",{staticClass:"u-padding-10"},[t._v("温差："+t._s(t.bmapWeather.temperature))])],1)],1),e("v-uni-view",{staticClass:"u-abso l-color-white",staticStyle:{bottom:"0",width:"100%"}},t._l(t.futureWeather,(function(a,i){return 0!==i?e("v-uni-view",{key:a.date,staticClass:"u-padding-20 u-flex u-row-between u-col-center"},[e("v-uni-view",{staticClass:"u-padding-10"},[t._v(t._s(a.date)+"："+t._s(a.weather)),e("v-uni-image",{staticClass:"u-m-l-20 u-m-r-20",staticStyle:{heigh:"30rpx",width:"44rpx"},attrs:{src:a.dayPictureUrl,mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"u-padding-10"},[t._v(t._s(a.wind)+" \n\t\t\t\t"+t._s(a.temperature)),e("v-uni-image",{staticClass:"u-m-l-20",staticStyle:{heigh:"30rpx",width:"44rpx"},attrs:{src:a.nightPictureUrl,mode:"widthFix"}})],1)],1):t._e()})),1),e("u-toast",{ref:"uToast"})],1)},s=[]},a9cd:function(t,a,e){var i=e("5e61");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("19e436e4",i,!0,{sourceMap:!1,shadowMode:!1})},c197:function(t,a,e){"use strict";e("ac1f"),e("1276"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=e("60ab"),n=e("35d3"),s={data:function(){return{isFixed:!0,isBack:!0,backText:"返回",backIconName:"nav-back",title:"weather",borderBottom:!1,background:{},useSlot:!0,search:!1,custom:!1,rightSlot:!1,keyword:"",slotRight:!1,inputVal:"",lat:39.9776,lng:116.35231,amapPlugin:null,bmapPlugin:null,key:this.$lottery.$constant.amapWxKey,ak:this.$lottery.$constant.bmapWxKey,amapWeather:{},bmapWeather:{},futureWeather:[],weatherPic:"/static/images/lottery/weather.jpg"}},onLoad:function(t){var a=this;this.amapPlugin=new i.AMapWX({key:this.key}),this.bmapPlugin=new n.BMapWX({ak:this.ak}),setTimeout((function(){var t=uni.getSystemInfoSync().windowHeight;a.scrollH=t-44-uni.upx2px(600),a.getAmapWeather(),a.getBmapWeather()}),300)},methods:{enterInput:function(t){this.getAmapWeather(t),this.getBmapWeather(t)},customInput:function(t){this.getAmapWeather(t),this.getBmapWeather(t)},getAmapWeather:function(t){var a=this;uni.showLoading({title:"加载中..."}),this.amapPlugin.getWeather({location:"",success:function(t){console.log("amap：",t),a.amapWeather=t,uni.hideLoading()},fail:function(t){console.log("amap:",t);var e=t.errMsg.split(" ");a.$refs.uToast.show({title:JSON.parse(e[1]).message,type:"error",icon:!1,position:"center",duration:3e3}),uni.hideLoading()}})},getBmapWeather:function(){var t=this;uni.showLoading({title:"获取中..."}),uni.hideLoading();var a=function(a){uni.hideLoading(),console.log("bmap:",a);var e=a.errMsg.split(" ");t.$refs.uToast.show({title:JSON.parse(e[1]).message,type:"error",icon:!1,position:"center",duration:3e3})},e=function(a){uni.hideLoading(),console.log("bmap:",a),t.bmapWeather=a.currentWeather[0],t.bmapWeatherInfo=a.originalData,t.title=t.bmapWeather.currentCity,t.futureWeather=t.bmapWeatherInfo.results[0].weather_data};this.bmapPlugin.weather({fail:a,success:e})}}};a.default=s}}]);